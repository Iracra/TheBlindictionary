<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link id="styleLink" rel="stylesheet" type="text/css" href="/views/style.css">
    <title>The Blind Dictionary</title>
</head>

<body aria-label="The Blind Dictionary">
    <h1>The Blind Dictionary</h1>
    <input type="text" id="wordInput" placeholder="Searchbar"></input>
    <button id="searchButton">Search Term</button>
    <button id="clearButton">Clear</button>
    <button id="settings-button" onclick="redirectToSettings()">Page Settings</button>
    <div id="results"></div>
    <div id="details" hidden="false">
        <h1 id="detailsHdr" aria-label="Terms Details">Terms Details:
            <div id="datailCont" aria-label="Content">

            </div>
        </h1>
    </div>
    <script type="text/javascript" src="/views/script.js"></script>
    <script src="https://code.responsivevoice.org/responsivevoice.js?key=fbCBzWk0"></script>
    <script>
        function redirectToSettings() {
            const currentURL = new URL(window.location.href);

            // Get the values of bgColor, textColor, textFont, and textSize from the URL
            const bgColor = currentURL.searchParams.get('bgColor');
            const textColor = currentURL.searchParams.get('textColor');
            const textFont = currentURL.searchParams.get('textFont');
            const textSize = currentURL.searchParams.get('textSize');


            var url = `/settings?bgColor=${bgColor}&textColor=${textColor}&textFont=${textFont}&textSize=${textSize}`;
            // Check if all parameters have values
            if (bgColor && textColor && textFont && textSize) {
                // If all parameters are present, navigate to the URL with parameters

                window.location.replace(url);
                window.location.href = url;
            } else {
                // If any parameter is missing, navigate to the URL without parameters
                window.location.replace('/settings');
                window.location.href = '/settings';
            }
        }
        function applyStylesToAllElements(bgColor, textColor, textFont, textSize) {
            // Get all elements in the document
            const allElements = document.querySelectorAll('*');

            // Loop through all elements and apply the styles
            allElements.forEach((element) => {
                element.style.backgroundColor = bgColor;
                element.style.color = textColor;
                element.style.fontFamily = textFont;
                element.style.fontSize = textSize;
            });
        }

        // Attach the function to the window.onload event
        window.onload = function () {
            // Get the values from the URL parameters
            const currentURL = new URL(window.location.href);
            const bgColor = currentURL.searchParams.get('bgColor');
            const textColor = currentURL.searchParams.get('textColor');
            const textFont = currentURL.searchParams.get('textFont');
            const textSize = currentURL.searchParams.get('textSize');
            if (bgColor && textColor && textFont && textSize) {
            // Call the function to apply styles to all elements
            applyStylesToAllElements(bgColor, textColor, textFont, textSize);
            }
        };
    </script>
</body>

</html>